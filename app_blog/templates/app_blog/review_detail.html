{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Review Detail - {{ review.title }}{% endblock %}

{% block content %}

<a href="{% url 'reviews' %}" class="btn btn-success w-23"> Back to Reviews </a>

<div class="container py-4">
    <div class="d-flex align-items-center justify-content-between bg-light rounded shadow-sm p-4 review-box">
        <!-- Game Image on the Left -->
        <div class="review-img me-4" style="flex-shrink: 0;">
            <img src="{{ review.images.url }}" alt="{{ review.image_alt }}" class="img-fluid" style="max-width: 250px;">
        </div>

        <!-- Review Details on the Right -->
        <div class="review-details">
            <h1>{{ review.title }}</h1>
            <p class="text-muted">
                <strong>Posted by:
                    {% if profile.image.url %}
                    <img src="{{ profile.image.url }}" alt="{{ profile.user.username }}'s profile image"
                        class="img-fluid rounded-circle" style="max-width: 2rem;">
                    {% else %}
                    <img src="{% static 'icons/blank-avatar-photo-place-holder.webp' %}" alt="Placeholder image"
                        class="img-fluid rounded-circle" style="max-width: 2rem;">
                    {% endif %}
                    {{ review.user }} on {{ review.posted_date|date:"F j, Y" }} </strong>
            </p>

            <hr>
            <div class="row">
                <div class="col-12 col-md-6">
                    <p><strong>Genre: </strong>{{ review.genre }}</p>
                    <p><strong>Platform: </strong>{{ review.game_platform }}</p>
                    <p><strong>Console: </strong>{{ review.game_console }}</p>
                </div>

                <div class="col-12 col-md-6">
                    <p><strong>Score: </strong>{{ review.game_score }}/10</p>
                </div>
            </div>

            <p><strong>Review: </strong>{{ review.review | safe }}</p>
            <input type="hidden" value="{{ review.slug }}" id="review-slug" data-slug="{{ review.slug }}">

            <!-- Edit and Delete Options for Author -->
            {% if request.user == review.user %}
            <div class="text-center mt-3">
                <a href="{% url 'edit_review' review.id %}" class="btn btn-sm btn-primary w-25">Edit</a>
                <a href="{% url 'delete_review' review.id %}" class="btn btn-sm btn-danger w-25">Delete</a>
            </div>
            {% endif %}
        </div>
    </div>

  
    {% endblock %}
